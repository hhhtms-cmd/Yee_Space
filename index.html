<!DOCTYPE html>
<html>
<body>
    <div id="result">正在诊断你的 API Key 权限...</div>
    <script>
        const API_KEY = "AIzaSyDk8ZrNTwryMCp1IWIZ8ufwYqgiA00JHjw";
        async function checkModels() {
            try {
                // 尝试拉取你这个 Key 真正能看到的所有模型
                const res = await fetch(`https://generativelanguage.googleapis.com/v1beta/models?key=${API_KEY}`);
                const data = await res.json();
                
                if (data.models) {
                    let html = "<h3>你的 Key 可以使用的模型列表：</h3><ul>";
                    data.models.forEach(m => {
                        html += `<li><b>${m.name}</b> (支持操作: ${m.supportedGenerationMethods.join(', ')})</li>`;
                    });
                    html += "</ul><p>请从中挑选一个名称填入代码中。</p>";
                    document.getElementById('result').innerHTML = html;
                } else {
                    document.getElementById('result').innerHTML = "错误详情：" + JSON.stringify(data.error);
                }
            } catch (e) {
                document.getElementById('result').innerText = "请求失败，请检查网络或 Key 格式。";
            }
        }
        checkModels();
    </script>
</body>
</html>
